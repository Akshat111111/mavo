{"version":3,"sources":["util.js"],"names":[],"mappings":"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","file":"mavo.es5.js","sourcesContent":["(function ($, $$) {\n\nvar _ = $.extend(Mavo, {\n\ttoJSON: data => {\n\t\tif (data === null) {\n\t\t\treturn \"\";\n\t\t}\n\n\t\tif (typeof data === \"string\") {\n\t\t\t// Do not stringify twice!\n\t\t\treturn data;\n\t\t}\n\n\t\treturn JSON.stringify(data, null, \"\\t\");\n\t},\n\n\t// Convert an identifier to readable text that can be used as a label\n\treadable: function (identifier) {\n\t\t// Is it camelCase?\n\t\treturn identifier && identifier\n\t\t\t\t .replace(/([a-z])([A-Z])(?=[a-z])/g, ($0, $1, $2) => $1 + \" \" + $2.toLowerCase()) // camelCase?\n\t\t\t\t .replace(/([a-z])[_\\/-](?=[a-z])/g, \"$1 \") // Hyphen-separated / Underscore_separated?\n\t\t\t\t .replace(/^[a-z]/, $0 => $0.toUpperCase()); // Capitalize\n\t},\n\n\tqueryJSON: function(data, path) {\n\t\tif (!path || !data) {\n\t\t\treturn data;\n\t\t}\n\n\t\treturn $.value.apply($, [data].concat(path.split(\"/\")));\n\t},\n\n\t// If the passed value is not an array, convert to an array\n\ttoArray: arr => {\n\t\treturn arr === undefined? [] : Array.isArray(arr)? arr : [arr];\n\t},\n\n\tdelete: (arr, element) => {\n\t\tvar index = arr && arr.indexOf(element);\n\n\t\tif (index > -1) {\n\t\t\tarr.splice(index, 1);\n\t\t}\n\t},\n\n\t// Recursively flatten a multi-dimensional array\n\tflatten: arr => {\n\t\tif (!Array.isArray(arr)) {\n\t\t\treturn [arr];\n\t\t}\n\n\t\treturn arr.reduce((prev, c) => _.toArray(prev).concat(_.flatten(c)), []);\n\t},\n\n\tis: function(thing, ...elements) {\n\t\tfor (let element of elements) {\n\t\t\tif (element && element.matches && element.matches(_.selectors[thing])) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t},\n\n\tdata: (element, name, value) => {\n\t\tif (value === undefined) {\n\t\t\treturn $.value(element, \"_\", \"data\", \"mavo\", name);\n\t\t}\n\t\telse {\n\t\t\telement._.data.mavo = element._.mavo || {};\n\t\t\telement._.data.mavo[name] = value;\n\t\t}\n\t},\n\n\tpushUnique: (arr, item) => {\n\t\tif (arr.indexOf(item) === -1) {\n\t\t\tarr.push(item);\n\t\t}\n\t},\n\n\t/**\n\t * Get the value of an attribute, with fallback attributes in priority order.\n\t */\n\tgetAttribute: function(element, ...attributes) {\n\t\tfor (let i=0, attribute; attribute = attributes[i]; i++) {\n\t\t\tlet value = element.getAttribute(attribute);\n\n\t\t\tif (value) {\n\t\t\t\treturn value;\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t},\n\n\turlParam: function(...names) {\n\t\tvar searchParams = \"searchParams\" in URL.prototype? new URL(location).searchParams : null;\n\t\tvar value = null;\n\n\t\tfor (let name of names) {\n\t\t\tif (searchParams) {\n\t\t\t\tvalue = searchParams.get(name);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tvar match = location.search.match(RegExp(`[?&]${name}(?:=([^&]+))?(?=&|$)`, \"i\"));\n\t\t\t\tvalue = match && (match[1] || \"\");\n\t\t\t}\n\n\t\t\tif (value !== null) {\n\t\t\t\treturn value;\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t},\n\n\t// Credit: https://remysharp.com/2010/07/21/throttling-function-calls\n\tdebounce: function (fn, delay) {\n\t\tvar timer = null;\n\n\t\treturn function () {\n\t\t\tvar context = this, args = arguments;\n\n\t\t\tclearTimeout(timer);\n\t\t\ttimer = setTimeout(function () {\n\t\t\t\tfn.apply(context, args);\n\t\t\t}, delay);\n\t\t};\n\t},\n\n\tescapeRegExp: s => s.replace(/[-\\/\\\\^$*+?.()|[\\]{}]/g, \"\\\\$&\"),\n\n\tObserver: $.Class({\n\t\tconstructor: function(element, attribute, callback, oldValue) {\n\t\t\tif (callback instanceof MutationObserver) {\n\t\t\t\tthis.observer = callback;\n\t\t\t}\n\n\t\t\tthis.observer = this.observer || new MutationObserver(callback);\n\t\t\tthis.element = element;\n\t\t\tthis.callback = callback;\n\t\t\tthis.attribute = attribute;\n\t\t\tthis.oldValue = oldValue;\n\n\t\t\tthis.options = {};\n\n\t\t\tif (attribute) {\n\t\t\t\t$.extend(this.options, {\n\t\t\t\t\tattributes: true,\n\t\t\t\t\tattributeFilter: this.attribute == \"all\"? undefined : [this.attribute],\n\t\t\t\t\tattributeOldValue: !!this.oldValue\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (!this.attribute || this.attribute == \"all\") {\n\t\t\t\t$.extend(this.options, {\n\t\t\t\t\tcharacterData: true,\n\t\t\t\t\tchildList: true,\n\t\t\t\t\tsubtree: true,\n\t\t\t\t\tcharacterDataOldValue: !!this.oldValue\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tthis.run();\n\t\t},\n\n\t\tstop: function() {\n\t\t\tif (this.running) {\n\t\t\t\tthis.observer.disconnect();\n\t\t\t\tthis.running = false;\n\t\t\t}\n\n\t\t\treturn this;\n\t\t},\n\n\t\trun: function() {\n\t\t\tif (!this.running) {\n\t\t\t\tthis.observer.observe(this.element, this.options);\n\t\t\t\tthis.running = true;\n\t\t\t}\n\n\t\t\treturn this;\n\t\t},\n\n\t\t/**\n\t\t * Disconnect an observer, run some code, then observe again\n\t\t */\n\t\tsneak: function(callback) {\n\t\t\tif (this.running) {\n\t\t\t\tthis.stop();\n\t\t\t\tvar ret = callback();\n\t\t\t\trequestAnimationFrame(() => this.run());\n\t\t\t}\n\t\t\telse {\n\t\t\t\tvar ret = callback();\n\t\t\t}\n\n\t\t\treturn ret;\n\t\t}\n\t}),\n\n\tdefer: function(constructor) {\n\t\tvar res, rej;\n\n\t\tvar promise = new Promise((resolve, reject) => {\n\t\t\tif (constructor) {\n\t\t\t\tconstructor(resolve, reject);\n\t\t\t}\n\n\t\t\tres = resolve;\n\t\t\trej = reject;\n\t\t});\n\n\t\tpromise.resolve = a => {\n\t\t\tres(a);\n\t\t\treturn promise;\n\t\t};\n\n\t\tpromise.reject = a => {\n\t\t\trej(a);\n\t\t\treturn promise;\n\t\t};\n\n\t\treturn promise;\n\t}\n});\n\n// Bliss plugins\n\n$.add(\"toggleAttribute\", function(name, value, test = value !== null) {\n\tif (test) {\n\t\tthis.setAttribute(name, value);\n\t}\n\telse {\n\t\tthis.removeAttribute(name);\n\t}\n});\n\n// Provide shortcuts to long property chains\n$.proxy = $.classProps.proxy = $.overload(function(obj, property, proxy) {\n\tObject.defineProperty(obj, property, {\n\t\tget: function() {\n\t\t\treturn this[proxy][property];\n\t\t},\n\t\tset: function(value) {\n\t\t\tthis[proxy][property] = value;\n\t\t},\n\t\tconfigurable: true,\n\t\tenumerable: true\n\t});\n\n\treturn obj;\n});\n\n$.classProps.propagated = function(proto, names) {\n\tMavo.toArray(names).forEach(name => {\n\t\tvar existing = proto[name];\n\n\t\tproto[name] = function() {\n\t\t\tvar ret = existing && existing.apply(this, arguments);\n\n\t\t\tif (this.propagate && ret !== false) {\n\t\t\t\tthis.propagate(name);\n\t\t\t}\n\t\t};\n\t});\n};\n\n// :focus-within and :target-within shim\nfunction updateWithin(cl, element) {\n\tcl = \"mv-\" + cl + \"-within\";\n\t$$(\".\" + cl).forEach(el => el.classList.remove(cl));\n\n\twhile (element && element.classList) {\n\t\telement.classList.add(cl);\n\t\telement = element.parentNode;\n\t}\n};\n\ndocument.addEventListener(\"focus\", evt => {\n\tupdateWithin(\"focus\", evt.target);\n}, true);\n\ndocument.addEventListener(\"blur\", evt => {\n\tupdateWithin(\"focus\", null);\n}, true);\n\naddEventListener(\"hashchange\", evt => {\n\tupdateWithin(\"target\", $(location.hash));\n});\n\ndocument.documentElement.addEventListener(\"mavo:datachange\", evt => {\n\t// TODO debounce\n\tupdateWithin(\"target\", $(location.hash));\n});\n\nupdateWithin(\"focus\", document.activeElement !== document.body? document.activeElement : null);\n\n})(Bliss, Bliss.$);\n"],"sourceRoot":"/source/"}
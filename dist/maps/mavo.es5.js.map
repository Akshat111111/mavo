{"version":3,"sources":["util.js"],"names":[],"mappings":"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","file":"mavo.es5.js","sourcesContent":["(function ($, $$) {\n\nvar _ = $.extend(Mavo, {\n\ttoJSON: data => {\n\t\tif (data === null) {\n\t\t\treturn \"\";\n\t\t}\n\n\t\tif (typeof data === \"string\") {\n\t\t\t// Do not stringify twice!\n\t\t\treturn data;\n\t\t}\n\n\t\treturn JSON.stringify(data, null, \"\\t\");\n\t},\n\n\t// Convert an identifier to readable text that can be used as a label\n\treadable: function (identifier) {\n\t\t// Is it camelCase?\n\t\treturn identifier && identifier\n\t\t\t\t .replace(/([a-z])([A-Z])(?=[a-z])/g, ($0, $1, $2) => $1 + \" \" + $2.toLowerCase()) // camelCase?\n\t\t\t\t .replace(/([a-z])[_\\/-](?=[a-z])/g, \"$1 \") // Hyphen-separated / Underscore_separated?\n\t\t\t\t .replace(/^[a-z]/, $0 => $0.toUpperCase()); // Capitalize\n\t},\n\n\tqueryJSON: function(data, path) {\n\t\tif (!path || !data) {\n\t\t\treturn data;\n\t\t}\n\n\t\treturn $.value.apply($, [data].concat(path.split(\"/\")));\n\t},\n\n\tobserve: function(element, attribute, observer, oldValue) {\n\t\tif (!(observer instanceof MutationObserver)) {\n\t\t\tobserver = new MutationObserver(observer);\n\t\t}\n\n\t\tvar options = {};\n\n\t\tif (attribute) {\n\t\t\t$.extend(options, {\n\t\t\t\tattributes: true,\n\t\t\t\tattributeFilter: attribute == \"all\"? undefined : [attribute],\n\t\t\t\tattributeOldValue: !!oldValue\n\t\t\t});\n\t\t}\n\n\t\tif (!attribute || attribute == \"all\") {\n\t\t\t$.extend(options, {\n\t\t\t\tcharacterData: true,\n\t\t\t\tchildList: true,\n\t\t\t\tsubtree: true,\n\t\t\t\tcharacterDataOldValue: !!oldValue\n\t\t\t});\n\t\t}\n\n\t\tobserver.observe(element, options);\n\n\t\treturn observer;\n\t},\n\n\t// If the passed value is not an array, convert to an array\n\ttoArray: arr => {\n\t\treturn arr === undefined? [] : Array.isArray(arr)? arr : [arr];\n\t},\n\n\t// Recursively flatten a multi-dimensional array\n\tflatten: arr => {\n\t\tif (!Array.isArray(arr)) {\n\t\t\treturn [arr];\n\t\t}\n\n\t\treturn arr.reduce((prev, c) => _.toArray(prev).concat(_.flatten(c)), []);\n\t},\n\n\tis: function(thing, element) {\n\t\treturn element.matches && element.matches(_.selectors[thing]);\n\t},\n\n\thas: function(option, element) {\n\t\treturn element.matches && element.matches(_.selectors.option(option));\n\t},\n\n\turlParam: function(...names) {\n\t\tvar searchParams = \"searchParams\" in URL.prototype? new URL(location).searchParams : null;\n\t\tvar value = null;\n\n\t\tfor (let name of names) {\n\t\t\tif (searchParams) {\n\t\t\t\tvalue = searchParams.get(name);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tvar match = location.search.match(RegExp(`[?&]${name}(?:=([^&]+))?(?=&|$)`, \"i\"));\n\t\t\t\tvalue = match && (match[1] || \"\");\n\t\t\t}\n\n\t\t\tif (value !== null) {\n\t\t\t\treturn value;\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t},\n\n\tescapeRegExp: s => s.replace(/[-\\/\\\\^$*+?.()|[\\]{}]/g, \"\\\\$&\")\n});\n\n// Bliss plugins\n\n// Provide shortcuts to long property chains\n$.proxy = $.classProps.proxy = $.overload(function(obj, property, proxy) {\n\tObject.defineProperty(obj, property, {\n\t\tget: function() {\n\t\t\treturn this[proxy][property];\n\t\t},\n\t\tset: function(value) {\n\t\t\tthis[proxy][property] = value;\n\t\t},\n\t\tconfigurable: true,\n\t\tenumerable: true\n\t});\n\n\treturn obj;\n});\n\n$.classProps.propagated = function(proto, names) {\n\tMavo.toArray(names).forEach(name => {\n\t\tvar existing = proto[name];\n\n\t\tproto[name] = function() {\n\t\t\tvar ret = existing && existing.apply(this, arguments);\n\n\t\t\tif (this.propagate && ret !== false) {\n\t\t\t\tthis.propagate(name);\n\t\t\t}\n\t\t};\n\t});\n};\n\n// :focus-within and :target-within shim\ndocument.addEventListener(\"focus\", evt => {\n\tvar isFocus = evt.type == \"focus\";\n\tvar cl = `${isFocus? \"focus\" : \"target\"}-within`;\n\tvar element = isFocus? evt.target : $(location.hash);\n\n\t$$(\".\" + cl).forEach(el => el.classList.remove(cl));\n\n\twhile (element && (element = element.parentNode) && element.classList) {\n\t\telement.classList.add(cl);\n\t}\n}, true);\n\n})(Bliss, Bliss.$);\n"],"sourceRoot":"/source/"}